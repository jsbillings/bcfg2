.TH "bcfg2-admin" 8
.SH NAME
bcfg2-admin \- Perform repository administration tasks
.SH SYNOPSIS
.B bcfg2-admin
.I [-C config-file]
.I <mode>
.I <mode args>
.I <mode options>
.SH DESCRIPTION
.PP
.B bcfg2-admin
Perform Bcfg2 repository administration
.SH OPTIONS
.PP
.B \-C <config-file>
.RS
Specify the location of the configuration file (if it is not in
/etc/bcfg2.conf).
.RE
.SH MODES
.PP
.B init
.RS
Initialize a new repository (interactive).
.RE
.B backup
.RS
Create an archive of the whole Bcfg2 repository.
.RE
.B bundle <action>
.RS
Display details about the available bundles.
.RE
.B client <action> <client> [attribute=value]
.RS
Add, edit, or remove clients entries in metadata.
.RE
.B query [g=group] [p=profile] [-f output-file] [-n] [-c]
.RS
Search for clients based on group or profile.
.RE
.B compare <old> <new>
.RS
Compare two client configurations. Can be used to verify consistent
behavior between releases. Determine differences between files or
directories.
.RE
.B minestruct <client> [-f xml-file] [-g groups]
.RS
Build structure entries based on client statistics extra entries.
.RE
.B pull <client> <entry-type> <entry-name>
.RS
Install configuration information into repo based on client bad
entries.
.RE
.B reports [init|load_stats|purge|scrub|update]
.RS
Interact with the dynamic reporting system.
.RE
.B snapshots [init|dump|query|reports]
.RS
Interact with the Snapshots database.
.RE
.B tidy
.RS
Remove unused files from repository.
.RE
.B viz [-H] [-b] [-k] [-o png-file]
.RS
Create a graphviz diagram of client, group and bundle information.
.RE
.SH BUNDLE OPTIONS
.PP
.B mode
.RS
List all available xml bundles 'list-xml' or for all available genshi
bundles 'list-genshi'. 'show' provides an interactive dialog to get
details about the available bundles.
.RE
.SH CLIENT OPTIONS
.PP
.B mode
.RS
Add a client 'add', delete a client 'del', or 'list' all client entries.
.RE
.B client
.RS
Specify the client's name.
.RE
.B attribute=value
.RS
Set attribute values when adding a new client. Allowed attributes
are 'profile', 'uuid', 'password', 'location', 'secure', and 'address'.
.RE
.SH QUERY OPTIONS
.PP
.B g=group
.RS
Specify a group to search within.
.RE
.B p=profile
.RS
Specify a profile to search within.
.RE
.B \-f <output-file>
.RS
Write the results of the query to a file.
.RE
.B \-n
.RS
Print the results, one on each line.
.RE
.B \-c
.RS
Print the results, separated by commas.
.RE
.SH COMPARE OPTIONS
.PP
.B old
.RS
Specify the location of the old configuration file.
.RE
.B new
.RS
Specify the location of the new configuration file.
.RE
.SH MINESTRUCT OPTIONS
.PP
.B client
.RS
Client whose metadata is to be searched for extra entries.
.RE
.B \-g <groups>
.RS
Hierarchy of groups in which to place the extra entries in.
.RE
.B \-f <xml-output-file>
.RS
Specify the xml file in which to write the extra entries.
.RE
.SH PULL OPTIONS
.PP
.B client
.RS
Specify the name of the client to search for.
.RE
.B entry-type
.RS
Specify the type of the entry to pull.
.RE
.B entry-name
.RS
Specify the name of the entry to pull.
.RE
.SH REPORTS OPTIONS
.PP
.B init
.RS
Initialize the database.
.RE
.B load_stats [-s] [-c] [-03]
.RS
Load statistics data.
.RE
.B purge [--client [n]] [--days [n]] [--expired]
.RS
Purge historic and expired data.
.RE
.B scrub
.RS
Scrub the database for duplicate reasons and orphaned entries.
.RE
.B update
.RS
Apply any updates to the reporting database.
.RE
.SH SNAPSHOTS OPTIONS
.PP
.B init
.RS
Initialize the snapshots database.
.RE
.B query
.RS
Query the snapshots database.
.RE
.B dump
.RS
Dump some of the contents of the snapshots database.
.RE
.B reports [-a] [-b] [-e] [--date=<MM-DD-YYYY>]
.RS
Generate reports for clients in the snapshots database.
.RE
.SH VIZ OPTIONS
.PP
.B \-H
.RS
Include hosts in diagram.
.RE
.B \-b
.RS
Include bundles in diagram.
.RE
.B \-o <output file>
.RS
Write to outfile file instead of stdout.
.RE
.B \-k
.RS
Add a shape/color key.
.RE
